@using BlazorOptions.ViewModels
@using Microsoft.AspNetCore.Components.Web
<MudStack Row="true" AlignItems="AlignItems.Center" Spacing="1" Class="mt-3 quick-add-panel">
    <MudTextField T="string"
                  @bind-Value="ViewModel.QuickLegInput"
                  Label="Quick add"
                  Placeholder="+1 C 3400"
                  Variant="Variant.Outlined"
                  Margin="Margin.Dense"
                  Immediate="true"
                  OnKeyDown="HandleQuickLegKeyDown"
                  Class="quick-leg-input" />

        <MudButton Variant="Variant.Filled"
                   Color="Color.Primary"
                   OnClick="async () => await ViewModel.AddQuickLegAsync()">
            Add
        </MudButton>
 
</MudStack>
@if (!string.IsNullOrWhiteSpace(ViewModel.AddActionDescription))
{
    <MudText Typo="Typo.caption" Class="quick-add-preview">
        @ViewModel.AddActionDescription
    </MudText>
}

@code {
    [Parameter, EditorRequired] public QuickAddViewModel ViewModel { get; set; }

    private Task HandleQuickLegKeyDown(KeyboardEventArgs args)
    {
        return ViewModel.OnQuickLegKeyDown(args.Key);
    }
}

<style>
    .quick-add-panel {
        flex-wrap: nowrap;
    }

    .quick-add-panel .quick-leg-input {
        width: 220px;
        flex: 0 0 220px;
    }

    .quick-add-preview {
        margin-left: 4px;
        opacity: 0.85;
    }
</style>
